CREATE TABLE empresas (
    id INT PRIMARY KEY AUTO_INCREMENT,
    razon_social VARCHAR(255),
    ruc VARCHAR(15),
    direccion VARCHAR(255),
    telefono VARCHAR(20),
    correo VARCHAR(255),
    id_rol INT,
    id_usuario INT,
    FOREIGN KEY (id_rol) REFERENCES roles(id),
    FOREIGN KEY (id_usuario) REFERENCES usuarios(id)
);

CREATE TABLE usuarios (
    id INT PRIMARY KEY AUTO_INCREMENT,
    nombres VARCHAR(100),
    apellidos VARCHAR(100),
    dni VARCHAR(15),
    direccion VARCHAR(255),
    telefono VARCHAR(20),
    usuario VARCHAR(50) UNIQUE,
    contrasenia VARCHAR(255),
    id_rol INT,
    ruta_foto VARCHAR(255),
    ruta_cv VARCHAR(255),
    FOREIGN KEY (id_rol) REFERENCES roles(id)
);

CREATE TABLE oferta_laboral (
    id INT PRIMARY KEY AUTO_INCREMENT,
    id_empresa INT,
    titulo VARCHAR(255),
    descripcion TEXT,
    fecha_publicacion DATE,
    fecha_cierre DATE,
    remuneracion DECIMAL(10, 2),
    ubicacion VARCHAR(255),
    tipo ENUM('presencial', 'remoto'),
    limite_postulantes INT,
    FOREIGN KEY (id_empresa) REFERENCES empresas(id)
);

CREATE TABLE postulaciones (
    id INT PRIMARY KEY AUTO_INCREMENT,
    id_usuario INT,
    id_oferta INT,
    fecha_hora_postulacion DATETIME,
    estado_actual ENUM('abierto', 'cerrado'),
    usuario_seleccionado BOOLEAN,
    FOREIGN KEY (id_usuario) REFERENCES usuarios(id),
    FOREIGN KEY (id_oferta) REFERENCES oferta_laboral(id)
);
